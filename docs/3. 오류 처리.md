# 오류 처리

`@RestControllerAdvice` 어노테이션을 이용하여 전역적으로 예외를 처리하는 `GlobalExceptionHandler`를 정의하고, 내부에 `@ExceptionHandler` 어노테이션을 이용하여 예외를 처리하는 메소드를 정의한다.

- `@ExceptionHandler` 이용의 장점

  - try-catch문을 사용하지 않고 예외를 처리할 수 있다.

- `@ControllerAdvice` 이용의 장점

  - 모든 컨트롤러에서 발생한 예외를 전역적으로 처리할 수 있다.

`GlobalExceptionHandler`는 `ResponseEntityExceptionHandler`를 상속받아 구현한다. 이를 통해 스프링 기본 오류를 DefaultHandlerExceptionResolver에서 처리하지 않고 `GlobalExceptionHandler`에서 통합해서 처리할 수 있다.

커스텀 예외 별로 예외 클래스를 제작하지는 않고, `CustomException`의 `httpStatus`와 `message`를 이용하여 예외별로 오류 메시지를 정의한다.

##

# Spring Web MVC에서의 오류를 처리하는 방법들

## @ResponseStatus를 이용한 오류 처리

Custom exception 클래스, @ExceptionHandler가 있는 메소드 또는 @RestControllerAdvice가 있는 클래스에 @ResponseStatus 어노테이션을 지정해 오류 HTTP 상태 코드를 지정할 수 있다.

- 단점
  - WAS까지 예외가 전달되어 처리된다
  - 에러 코드 외의 에러 메시지등을 전달하기 어렵다

## @ExceptionHandler를 이용한 오류 처리

컨트롤러의 메소드에 @ExceptionHandler 어노테이션을 지정해 오류를 처리할 수 있다.
또는 @ControllerAdvice 어노테이션을 지정한 클래스에 @ExceptionHandler 어노테이션을 지정해 모든 컨트롤러의 오류를 처리할 수 있다.

즉 컨트롤러내에 예외를 처리하는 메소드를 만들고, 해당 메소드에 @ExceptionHandler 어노테이션을 지정해 예외를 처리할 수 있다.

- 장점
  - ResponseStatus와 달리 에러 응답(payload)를 커스터마이징 할 수 있다
- 단점
  - 해당 컨트롤러에서 발생한 예외만 처리할 수 있어 전역적으로 처리하기 어렵다

## @ControllerAdvice를 이용한 오류 처리

~ExceptionHandler를 만들고 @ControllerAdvice 어노테이션을 지정하면 해당 클래스는 스프링 빈으로 등록되고, 모든 컨트롤러에서 발생한 예외를 처리할 수 있다.

# Reference

https://mangkyu.tistory.com/204

https://mangkyu.tistory.com/205
